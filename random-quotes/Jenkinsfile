node {
 checkout([$class: 'GitSCM', branches: [
  [name: "${BRANCH_NAME}"]
 ], doGenerateSubmoduleConfigurations: false, extensions: [
  [$class: 'PathRestriction', excludedRegions: '', includedRegions: 'random-quotes/.*'],
  [$class: 'PruneStaleBranch'],
  [$class: 'CloneOption', depth: 0, noTags: false, reference: "${JENKINS_HOME}/repos/playground-projects", shallow: false]
 ], submoduleCfg: [], userRemoteConfigs: [
  [url: 'https://github.com/Mksony/playground-projects.git']
 ]])

 docker.image('node:8.9.1').inside {
  withEnv([
   'CI=true'
  ]) {

   stage('Install dependencies') {
    sh 'cd random-quotes && yarn'
   }

   stage('Run tests') {
    sh 'cd random-quotes && yarn test'
   }

  }
 }
}